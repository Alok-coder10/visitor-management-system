<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>QR scanner</title>
  </head>
  <body data-rsssl="1">
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/html5-qrcode/2.3.4/html5-qrcode.min.js"
      integrity="sha512-k/KAe4Yff9EUdYI5/IAHlwUswqeipP+Cp5qnrsUjTPCgl51La2/JhyyjNciztD7mWNKLSXci48m7cctATKfLlQ=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      main {
        display: flex;
        justify-content: center;
        align-items: center;
      }
      #reader {
        width: 600px;
      }
      #result {
        text-align: center;
        font-size: 1.5rem;
      }
    </style>
    <main>
      <!-- <div id="reader"></div>
      <div id="result"></div> -->
    </main>

    <body
      class="bg-white relative min-h-screen flex items-center justify-center p-6"
    >
      <!-- Top right yellow shape -->
      <div
        class="hidden sm:block absolute top-0 right-0 w-24 h-24 bg-yellow-400 rounded-bl-[50px]"
      ></div>
      <!-- Bottom left yellow shape -->
      <div
        class="hidden sm:block absolute bottom-0 left-0 w-24 h-24 bg-yellow-400 rounded-tr-[50px]"
      ></div>
      <!-- Black background image on left corner -->
      <div
        class="absolute top-6 left-6 w-16 h-16 bg flex items-center justify-center text-white text-xs font-sans z-10"
      >
        <img src="iiitn.png" alt="Image" class="logo" />
      </div>

      <div class="max-w-md w-full flex flex-col items-center space-y-6">
        <h1 class="text-4xl font-extrabold font-sans text-black">
          Scan Your QR
        </h1>
        <div id="reader"></div>
        <div id="result"></div>
      </div>
    </body>
    <button onclick="history.back()" style=" background: #cdcc; color: #333; padding: 10px 20px; border: none; border-radius: 8px; cursor: pointer; font-size: 16px;margin-left: 100px;">Back</button>

    <script>
      const scanner = new Html5QrcodeScanner("reader", {
        qrbox: {
          width: 250,
          height: 250,
        },
        fps: 20,
      });
      scanner.render(success, error);
      function success(result) {
        // Optional: Show result before redirect
        document.getElementById("result").innerHTML = `
    <h2>âœ… Scanned!</h2>
    <p>Redirecting to verification...</p>
    `;

        // Stop scanner and remove it
        scanner.clear();
        document.getElementById("reader").remove();

        // Redirect to verify_pass.php with scanned result
        setTimeout(() => {
          window.location.href = `verify_pass.php?code=${encodeURIComponent(
            result
          )}`;
        }, 1000); // short delay to let user see message
      }

      function error(err) {
        console.error(err);
      }
    </script>
  </body>
</html>
